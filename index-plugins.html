<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Scaffolding Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            backdrop-filter: blur(10px);
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .plugin-config-btn {
            position: absolute;
            top: 30px;
            right: 30px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .plugin-config-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .wizard-container {
            padding: 40px;
        }

        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            position: relative;
            overflow-x: auto;
            padding: 10px 0;
        }

        .progress-bar::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background: #e0e0e0;
            z-index: 1;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            height: 2px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            z-index: 2;
            transition: width 0.3s ease;
            width: 0%;
        }

        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 3;
            position: relative;
            min-width: 100px;
            flex-shrink: 0;
        }

        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #666;
            transition: all 0.3s ease;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .step.active .step-circle,
        .step.completed .step-circle {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .step-title {
            font-size: 0.8rem;
            color: #666;
            font-weight: 500;
            text-align: center;
            white-space: nowrap;
        }

        .step.active .step-title {
            color: #333;
            font-weight: 600;
        }

        .wizard-content {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
            min-height: 400px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group .description {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 10px;
            font-style: italic;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group input[type="range"] {
            padding: 0;
            height: 6px;
        }

        .range-value {
            display: inline-block;
            margin-left: 10px;
            font-weight: 600;
            color: #667eea;
        }

        .checkbox-group,
        .radio-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .checkbox-item,
        .radio-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkbox-item:hover,
        .radio-item:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .checkbox-item input,
        .radio-item input {
            width: auto;
            margin-right: 10px;
        }

        .checkbox-item.checked,
        .radio-item.checked {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea10, #764ba210);
        }

        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }

        .tech-card {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .tech-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .tech-card.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea10, #764ba210);
        }

        .tech-card .icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .tech-card h3 {
            font-size: 1.1rem;
            margin-bottom: 5px;
            color: #333;
        }

        .tech-card p {
            font-size: 0.9rem;
            color: #666;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #f8f9fa;
            color: #666;
            border: 2px solid #e0e0e0;
        }

        .btn-secondary:hover {
            background: #e9ecef;
            border-color: #ced4da;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .hidden {
            display: none !important;
        }

        /* Plugin Configuration Modal */
        .modal-overlay {
            position: fixed; /* Stays in place even when scrolling */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5); /* Semi-transparent black overlay */
            display: flex; /* Centers the modal */
            justify-content: center;
            align-items: center;
            z-index: 999; /* Keeps it above everything else */
        }

        /* The modal content container */
        .modal {
            background: #fff;
            border-radius: 8px;
            max-width: 800px;
            width: 90%;
            max-height: 90%;
            overflow-y: auto; /* Allows scrolling inside the modal */
            padding: 20px;
        }

        .modal-header {
            padding: 25px 30px;
            border-bottom: 2px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 15px 15px 0 0;
        }

        .modal-header h2 {
            margin: 0;
            font-size: 1.5rem;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: white;
            cursor: pointer;
            padding: 5px;
            opacity: 0.8;
        }

        .modal-close:hover {
            opacity: 1;
        }

        .modal-content {
            padding: 30px;
        }

        .plugin-categories {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .category-tab {
            padding: 10px 20px;
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .category-tab.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: transparent;
        }

        .plugins-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .plugin-card {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .plugin-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .plugin-card.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, #667eea10, #764ba210);
        }

        .plugin-card .plugin-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .plugin-card .plugin-icon {
            font-size: 2rem;
            margin-right: 15px;
        }

        .plugin-card h3 {
            margin: 0;
            color: #333;
            font-size: 1.2rem;
        }

        .plugin-card .plugin-version {
            background: #667eea;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-left: auto;
        }

        .plugin-card p {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .plugin-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .plugin-tag {
            background: #f0f0f0;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            color: #666;
        }

        .plugin-checkbox {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 20px;
            height: 20px;
        }

        .generation-preview {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin-top: 20px;
        }

        .generation-preview h3 {
            color: #333;
            margin-bottom: 15px;
        }

        .preview-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #667eea;
        }

        .loading-animation {
            text-align: center;
            padding: 40px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .success-message {
            text-align: center;
            padding: 40px;
            color: #28a745;
        }

        .success-message .icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .plugin-config-section {
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .plugin-config-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e0e0e0;
        }

        .plugin-config-header .icon {
            font-size: 1.5rem;
            margin-right: 10px;
        }

        .plugin-config-header h3 {
            margin: 0;
            color: #333;
        }

        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .wizard-container {
                padding: 20px;
            }

            .plugin-config-btn {
                position: static;
                margin-top: 15px;
            }

            .progress-bar {
                flex-wrap: nowrap;
                overflow-x: auto;
            }

            .tech-grid,
            .plugins-grid {
                grid-template-columns: 1fr;
            }

            .navigation {
                flex-direction: column;
                gap: 15px;
            }

            .btn {
                width: 100%;
            }

            .modal {
                margin: 10px;
                max-height: calc(100vh - 20px);
            }

            .form-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="plugin-config-btn" onclick="openPluginManager()">‚öôÔ∏è Configure Plugins</button>
            <h1>üöÄ Smart Scaffolding Generator</h1>
            <p>Accelerate your development lifecycle with intelligent project scaffolding</p>
        </div>

        <div class="wizard-container">
            <div class="progress-bar" id="progressBar">
                <!-- Dynamic steps will be generated here -->
            </div>

            <!-- Dynamic wizard content will be generated here -->
            <div id="dynamicWizardContent"></div>

            <div class="navigation">
                <button class="btn btn-secondary" id="prevBtn" onclick="previousStep()" style="display: none;">Previous</button>
                <div></div>
                <button class="btn btn-primary" id="nextBtn" onclick="nextStep()">Next</button>
            </div>
        </div>
    </div>

    <!-- Plugin Configuration Modal -->
    <div class="modal-overlay hidden" id="pluginModal">
    <div class="modal">
        <div class="modal-header">
            <h2>üîß Plugin Manager</h2>
            <!-- Close button triggers the close function -->
            <button class="modal-close" onclick="closePluginManager()">&times;</button>
        </div>
        <div class="modal-content">
            <!-- Category tabs -->
            <div class="plugin-categories" id="pluginCategories">
                <div class="category-tab active" data-category="all">All Plugins</div>
                <div class="category-tab" data-category="backend">Backend</div>
                <div class="category-tab" data-category="frontend">Frontend</div>
                <div class="category-tab" data-category="database">Database</div>
                <div class="category-tab" data-category="devops">DevOps</div>
                <div class="category-tab" data-category="security">Security</div>
                <div class="category-tab" data-category="monitoring">Monitoring</div>
            </div>

            <!-- Plugin list will be populated dynamically -->
            <div class="plugins-grid" id="pluginsGrid"></div>

            <!-- Modal footer buttons -->
            <div style="margin-top: 30px; text-align: center;">
                <button class="btn btn-primary" onclick="applyPluginConfiguration()">Apply Configuration</button>
                <button class="btn btn-secondary" onclick="closePluginManager()" style="margin-left: 15px;">Cancel</button>
            </div>
        </div>
    </div>
</div>


    <script>
        // Plugin registry with configuration schemas
        const pluginRegistry = {
            // Backend Plugins
            'spring-boot-oauth2': {
                id: 'spring-boot-oauth2',
                name: 'Spring Boot + OAuth2',
                icon: '‚òï',
                version: '3.2.0',
                category: 'backend',
                description: 'Complete Spring Boot setup with OAuth2 security, JWT tokens, and enterprise-grade authentication.',
                tags: ['java', 'spring', 'oauth2', 'security'],
                enabled: true,
                configSchema: {
                    title: 'Spring Boot Configuration',
                    fields: [
                        {
                            name: 'javaVersion',
                            label: 'Java Version',
                            type: 'select',
                            options: ['11', '17', '21'],
                            default: '17',
                            description: 'Select the Java version for your project'
                        },
                        {
                            name: 'springBootVersion',
                            label: 'Spring Boot Version',
                            type: 'select',
                            options: ['3.0.x', '3.1.x', '3.2.x'],
                            default: '3.2.x'
                        },
                        {
                            name: 'includeSwagger',
                            label: 'Include Swagger Documentation',
                            type: 'checkbox',
                            default: true,
                            description: 'Generate OpenAPI 3.0 documentation with Swagger UI'
                        },
                        {
                            name: 'oauthProvider',
                            label: 'OAuth2 Provider',
                            type: 'radio',
                            options: [
                                { value: 'keycloak', label: 'Keycloak' },
                                { value: 'auth0', label: 'Auth0' },
                                { value: 'azure-ad', label: 'Azure AD' },
                                { value: 'google', label: 'Google OAuth' }
                            ],
                            default: 'keycloak'
                        },
                        {
                            name: 'maxConnections',
                            label: 'Max Database Connections',
                            type: 'range',
                            min: 5,
                            max: 100,
                            default: 20,
                            description: 'Maximum number of database connections in the pool'
                        }
                    ]
                }
            },
            'node-express-jwt': {
                id: 'node-express-jwt',
                name: 'Node.js + Express + JWT',
                icon: 'üü¢',
                version: '18.0.0',
                category: 'backend',
                description: 'Modern Node.js backend with Express framework, JWT authentication, and TypeScript support.',
                tags: ['nodejs', 'express', 'jwt', 'typescript'],
                enabled: false,
                configSchema: {
                    title: 'Node.js Configuration',
                    fields: [
                        {
                            name: 'nodeVersion',
                            label: 'Node.js Version',
                            type: 'select',
                            options: ['16.x', '18.x', '20.x'],
                            default: '18.x'
                        },
                        {
                            name: 'useTypeScript',
                            label: 'Use TypeScript',
                            type: 'checkbox',
                            default: true,
                            description: 'Enable TypeScript for better type safety'
                        },
                        {
                            name: 'jwtSecret',
                            label: 'JWT Secret Key',
                            type: 'text',
                            default: 'your-super-secret-jwt-key',
                            description: 'Secret key for JWT token signing'
                        }
                    ]
                }
            },
            // Frontend Plugins
            'react-material-ui': {
                id: 'react-material-ui',
                name: 'React + Material-UI',
                icon: '‚öõÔ∏è',
                version: '18.2.0',
                category: 'frontend',
                description: 'React application with Material-UI components, Redux Toolkit, and modern development setup.',
                tags: ['react', 'material-ui', 'redux', 'typescript'],
                enabled: true,
                configSchema: {
                    title: 'React Configuration',
                    fields: [
                        {
                            name: 'reactVersion',
                            label: 'React Version',
                            type: 'select',
                            options: ['17.x', '18.x'],
                            default: '18.x'
                        },
                        {
                            name: 'useTypeScript',
                            label: 'Use TypeScript',
                            type: 'checkbox',
                            default: true
                        },
                        {
                            name: 'stateManagement',
                            label: 'State Management',
                            type: 'radio',
                            options: [
                                { value: 'redux-toolkit', label: 'Redux Toolkit' },
                                { value: 'zustand', label: 'Zustand' },
                                { value: 'context', label: 'React Context' }
                            ],
                            default: 'redux-toolkit'
                        },
                        {
                            name: 'theme',
                            label: 'UI Theme',
                            type: 'select',
                            options: ['light', 'dark', 'auto'],
                            default: 'auto',
                            description: 'Default theme for the application'
                        }
                    ]
                }
            },
            'angular-bootstrap': {
                id: 'angular-bootstrap',
                name: 'Angular + Bootstrap',
                icon: 'üÖ∞Ô∏è',
                version: '17.0.0',
                category: 'frontend',
                description: 'Angular application with Bootstrap styling, Angular Material, and enterprise-grade architecture.',
                tags: ['angular', 'bootstrap', 'material', 'typescript'],
                enabled: false,
                configSchema: {
                    title: 'Angular Configuration',
                    fields: [
                        {
                            name: 'angularVersion',
                            label: 'Angular Version',
                            type: 'select',
                            options: ['15.x', '16.x', '17.x'],
                            default: '17.x'
                        },
                        {
                            name: 'includeAngularMaterial',
                            label: 'Include Angular Material',
                            type: 'checkbox',
                            default: true
                        },
                        {
                            name: 'routingStrategy',
                            label: 'Routing Strategy',
                            type: 'radio',
                            options: [
                                { value: 'hash', label: 'Hash Location Strategy' },
                                { value: 'path', label: 'Path Location Strategy' }
                            ],
                            default: 'path'
                        }
                    ]
                }
            },
            // Database Plugins
            'postgresql-config': {
                id: 'postgresql-config',
                name: 'PostgreSQL Database',
                icon: 'üêò',
                version: '15.0',
                category: 'database',
                description: 'PostgreSQL database with connection pooling, migrations, and performance optimization.',
                tags: ['postgresql', 'database', 'sql', 'migrations'],
                enabled: true,
                configSchema: {
                    title: 'PostgreSQL Configuration',
                    fields: [
                        {
                            name: 'version',
                            label: 'PostgreSQL Version',
                            type: 'select',
                            options: ['13.x', '14.x', '15.x', '16.x'],
                            default: '15.x'
                        },
                        {
                            name: 'enableSSL',
                            label: 'Enable SSL Connection',
                            type: 'checkbox',
                            default: true,
                            description: 'Use SSL for database connections in production'
                        },
                        {
                            name: 'maxConnections',
                            label: 'Max Connection Pool Size',
                            type: 'range',
                            min: 5,
                            max: 50,
                            default: 20
                        },
                        {
                            name: 'backupSchedule',
                            label: 'Backup Schedule',
                            type: 'select',
                            options: ['daily', 'weekly', 'monthly', 'disabled'],
                            default: 'daily',
                            description: 'Automated backup schedule'
                        }
                    ]
                }
            },
            // DevOps Plugins
            'docker-compose': {
                id: 'docker-compose',
                name: 'Docker + Compose',
                icon: 'üê≥',
                version: '24.0',
                category: 'devops',
                description: 'Complete Docker setup with multi-stage builds, compose configurations, and production optimization.',
                tags: ['docker', 'containerization', 'devops'],
                enabled: true,
                configSchema: {
                    title: 'Docker Configuration',
                    fields: [
                        {
                            name: 'baseImage',
                            label: 'Base Image',
                            type: 'select',
                            options: ['alpine', 'ubuntu', 'debian'],
                            default: 'alpine',
                            description: 'Base Docker image for containers'
                        },
                        {
                            name: 'multiStage',
                            label: 'Multi-stage Build',
                            type: 'checkbox',
                            default: true,
                            description: 'Use multi-stage builds for smaller production images'
                        },
                        {
                            name: 'includeNginx',
                            label: 'Include Nginx Reverse Proxy',
                            type: 'checkbox',
                            default: true
                        }
                    ]
                }
            },
            'gitlab-ci': {
                id: 'gitlab-ci',
                name: 'GitLab CI/CD',
                icon: 'ü¶ä',
                version: '16.0',
                category: 'devops',
                description: 'GitLab CI/CD pipeline with automated testing, building, and deployment stages.',
                tags: ['gitlab', 'cicd', 'automation', 'deployment'],
                enabled: true,
                configSchema: {
                    title: 'GitLab CI/CD Configuration',
                    fields: [
                        {
                            name: 'stages',
                            label: 'Pipeline Stages',
                            type: 'checkbox',
                            options: [
                                { value: 'test', label: 'Test', default: true },
                                { value: 'build', label: 'Build', default: true },
                                { value: 'security-scan', label: 'Security Scan', default: true },
                                { value: 'deploy-staging', label: 'Deploy to Staging', default: true },
                                { value: 'deploy-prod', label: 'Deploy to Production', default: false }
                            ]
                        },
                        {
                            name: 'deploymentStrategy',
                            label: 'Deployment Strategy',
                            type: 'radio',
                            options: [
                                { value: 'blue-green', label: 'Blue-Green Deployment' },
                                { value: 'rolling', label: 'Rolling Update' },
                                { value: 'canary', label: 'Canary Deployment' }
                            ],
                            default: 'rolling'
                        },
                        {
                            name: 'notificationChannel',
                            label: 'Notification Channel',
                            type: 'text',
                            default: '#deployments',
                            description: 'Slack channel for deployment notifications'
                        }
                    ]
                }
            },
            // Security Plugins
            'sonarqube-analysis': {
                id: 'sonarqube-analysis',
                name: 'SonarQube Code Quality',
                icon: 'üîç',
                version: '10.0',
                category: 'security',
                description: 'SonarQube integration for code quality analysis, security vulnerability detection, and technical debt management.',
                tags: ['sonarqube', 'code-quality', 'security', 'static-analysis'],
                enabled: true,
                configSchema: {
                    title: 'SonarQube Configuration',
                    fields: [
                        {
                            name: 'qualityGate',
                            label: 'Quality Gate',
                            type: 'select',
                            options: ['Sonar way', 'Custom', 'Strict'],
                            default: 'Sonar way',
                            description: 'Quality gate to enforce code standards'
                        },
                        {
                            name: 'coverageThreshold',
                            label: 'Code Coverage Threshold (%)',
                            type: 'range',
                            min: 50,
                            max: 100,
                            default: 80,
                            description: 'Minimum code coverage required to pass quality gate'
                        },
                        {
                            name: 'includeSecurityHotspots',
                            label: 'Include Security Hotspot Analysis',
                            type: 'checkbox',
                            default: true
                        }
                    ]
                }
            },
            // Monitoring Plugins
            'prometheus-grafana': {
                id: 'prometheus-grafana',
                name: 'Prometheus + Grafana',
                icon: 'üìä',
                version: '2.45.0',
                category: 'monitoring',
                description: 'Complete monitoring stack with Prometheus metrics collection and Grafana dashboards.',
                tags: ['prometheus', 'grafana', 'monitoring', 'metrics'],
                enabled: false,
                configSchema: {
                    title: 'Monitoring Configuration',
                    fields: [
                        {
                            name: 'metricsEndpoint',
                            label: 'Metrics Endpoint',
                            type: 'text',
                            default: '/actuator/prometheus',
                            description: 'Endpoint for metrics collection'
                        },
                        {
                            name: 'retentionPeriod',
                            label: 'Data Retention Period',
                            type: 'select',
                            options: ['7d', '15d', '30d', '90d', '1y'],
                            default: '30d'
                        },
                        {
                            name: 'alerting',
                            label: 'Enable Alerting',
                            type: 'checkbox',
                            default: true,
                            description: 'Configure alerts for critical metrics'
                        }
                    ]
                }
            }
        };

        // Wizard configuration
        let wizardSteps = [];
        let selectedPlugins = [];
        let pluginConfigurations = {};
        let currentStep = 1;
        let totalSteps = 1;

        // Initialize the application
        function initializeApplication() {
            // Set default selected plugins
            selectedPlugins = Object.keys(pluginRegistry).filter(id => pluginRegistry[id].enabled);
            
            // Initialize plugin configurations with defaults
            selectedPlugins.forEach(pluginId => {
                pluginConfigurations[pluginId] = getDefaultConfiguration(pluginRegistry[pluginId]);
            });

            generateWizardSteps();
            updateProgressBar();
            renderCurrentStep();
            updateNavigationButtons();
        }

        // Generate wizard steps based on selected plugins
        function generateWizardSteps() {
            wizardSteps = [
                {
                    id: 'project-info',
                    title: 'Project Info',
                    icon: 'üìã',
                    content: generateProjectInfoStep()
                }
            ];

            // Add plugin configuration steps
            selectedPlugins.forEach(pluginId => {
                const plugin = pluginRegistry[pluginId];
                if (plugin.configSchema && plugin.configSchema.fields.length > 0) {
                    wizardSteps.push({
                        id: `plugin-${pluginId}`,
                        title: plugin.name.split(' ')[0],
                        icon: plugin.icon,
                        content: generatePluginConfigStep(plugin)
                    });
                }
            });

            // Add final review step
            wizardSteps.push({
                id: 'review-generate',
                title: 'Review & Generate',
                icon: 'üöÄ',
                content: generateReviewStep()
            });

            totalSteps = wizardSteps.length;
        }

        // Generate project info step content
        function generateProjectInfoStep() {
            return `
                <h2>üìã Project Information</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="projectName">Project Name</label>
                        <input type="text" id="projectName" placeholder="Enter your project name" required>
                        <div class="description">A unique name for your project</div>
                    </div>
                    <div class="form-group">
                        <label for="organization">Organization</label>
                        <input type="text" id="organization" placeholder="ELCA" value="ELCA">
                        <div class="description">Your organization or company name</div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="projectDescription">Description</label>
                    <textarea id="projectDescription" rows="3" placeholder="Describe your project and its main objectives..."></textarea>
                    <div class="description">Brief description of your project's purpose and goals</div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="packageName">Package Name</label>
                        <input type="text" id="packageName" placeholder="com.elca.yourproject">
                        <div class="description">Java package naming convention</div>
                    </div>
                    <div class="form-group">
                        <label for="projectVersion">Initial Version</label>
                        <input type="text" id="projectVersion" placeholder="1.0.0" value="1.0.0">
                        <div class="description">Semantic version number</div>
                    </div>
                </div>
            `;
        }

        // Generate plugin configuration step
        function generatePluginConfigStep(plugin) {
            let content = `
                <div class="plugin-config-section">
                    <div class="plugin-config-header">
                        <span class="icon">${plugin.icon}</span>
                        <h3>${plugin.configSchema.title}</h3>
                    </div>
                    <div class="form-content">
            `;

            plugin.configSchema.fields.forEach(field => {
                content += generateFormField(field, plugin.id);
            });

            content += `
                    </div>
                </div>
            `;

            return content;
        }

        // Generate form field based on type
        function generateFormField(field, pluginId) {
            const fieldId = `${pluginId}_${field.name}`;
            const currentValue = pluginConfigurations[pluginId]?.[field.name] || field.default;

            switch (field.type) {
                case 'text':
                    return `
                        <div class="form-group">
                            <label for="${fieldId}">${field.label}</label>
                            ${field.description ? `<div class="description">${field.description}</div>` : ''}
                            <input type="text" id="${fieldId}" value="${currentValue || ''}" 
                                   onchange="updatePluginConfig('${pluginId}', '${field.name}', this.value)">
                        </div>
                    `;

                case 'select':
                    let options = field.options.map(option => 
                        `<option value="${option}" ${option === currentValue ? 'selected' : ''}>${option}</option>`
                    ).join('');
                    return `
                        <div class="form-group">
                            <label for="${fieldId}">${field.label}</label>
                            ${field.description ? `<div class="description">${field.description}</div>` : ''}
                            <select id="${fieldId}" onchange="updatePluginConfig('${pluginId}', '${field.name}', this.value)">
                                ${options}
                            </select>
                        </div>
                    `;

                case 'checkbox':
                    if (Array.isArray(field.options)) {
                        // Multiple checkboxes
                        let checkboxes = field.options.map((option, index) => {
                            const isChecked = currentValue?.includes ? currentValue.includes(option.value) : option.default;
                            return `
                                <div class="checkbox-item ${isChecked ? 'checked' : ''}" onclick="toggleCheckboxGroup('${fieldId}_${index}')">
                                    <input type="checkbox" id="${fieldId}_${index}" value="${option.value}" 
                                           ${isChecked ? 'checked' : ''} 
                                           onchange="updatePluginConfigArray('${pluginId}', '${field.name}', '${option.value}', this.checked)">
                                    <label for="${fieldId}_${index}">${option.label}</label>
                                </div>
                            `;
                        }).join('');
                        return `
                            <div class="form-group">
                                <label>${field.label}</label>
                                ${field.description ? `<div class="description">${field.description}</div>` : ''}
                                <div class="checkbox-group">
                                    ${checkboxes}
                                </div>
                            </div>
                        `;
                    } else {
                        // Single checkbox
                        return `
                            <div class="form-group">
                                <div class="checkbox-item ${currentValue ? 'checked' : ''}" onclick="toggleCheckbox('${fieldId}')">
                                    <input type="checkbox" id="${fieldId}" ${currentValue ? 'checked' : ''} 
                                           onchange="updatePluginConfig('${pluginId}', '${field.name}', this.checked)">
                                    <label for="${fieldId}">${field.label}</label>
                                </div>
                                ${field.description ? `<div class="description">${field.description}</div>` : ''}
                            </div>
                        `;
                    }

                case 'radio':
                    let radioButtons = field.options.map((option, index) => {
                        const isChecked = option.value === currentValue;
                        return `
                            <div class="radio-item ${isChecked ? 'checked' : ''}" onclick="selectRadio('${fieldId}_${index}', '${pluginId}', '${field.name}', '${option.value}')">
                                <input type="radio" id="${fieldId}_${index}" name="${fieldId}" value="${option.value}" 
                                       ${isChecked ? 'checked' : ''}>
                                <label for="${fieldId}_${index}">${option.label}</label>
                            </div>
                        `;
                    }).join('');
                    return `
                        <div class="form-group">
                            <label>${field.label}</label>
                            ${field.description ? `<div class="description">${field.description}</div>` : ''}
                            <div class="radio-group">
                                ${radioButtons}
                            </div>
                        </div>
                    `;

                case 'range':
                    return `
                        <div class="form-group">
                            <label for="${fieldId}">${field.label}</label>
                            ${field.description ? `<div class="description">${field.description}</div>` : ''}
                            <div style="display: flex; align-items: center;">
                                <input type="range" id="${fieldId}" min="${field.min}" max="${field.max}" 
                                       value="${currentValue}" 
                                       onchange="updatePluginConfig('${pluginId}', '${field.name}', this.value); updateRangeValue('${fieldId}')">
                                <span class="range-value" id="${fieldId}_value">${currentValue}</span>
                            </div>
                        </div>
                    `;

                default:
                    return '';
            }
        }

        // Generate review step
        function generateReviewStep() {
            return `
                <h2>üîç Review Configuration</h2>
                <div id="reviewContent">
                    <!-- Review content will be generated dynamically -->
                </div>
                
                <div class="loading-animation hidden" id="loadingAnimation">
                    <div class="spinner"></div>
                    <h3>Generating Your Project...</h3>
                    <p>AI is crafting your custom application scaffolding with enterprise-grade best practices.</p>
                </div>

                <div class="success-message hidden" id="successMessage">
                    <div class="icon">‚úÖ</div>
                    <h2>Project Generated Successfully!</h2>
                    <p>Your enterprise-ready application scaffolding is ready for download.</p>
                    <div style="margin-top: 20px;">
                        <button class="btn btn-primary" onclick="downloadProject()">üì¶ Download Project</button>
                    </div>
                </div>
            `;
        }

        // Update progress bar
        function updateProgressBar() {
            const progressBar = document.getElementById('progressBar');
            progressBar.innerHTML = '';

            wizardSteps.forEach((step, index) => {
                const stepNum = index + 1;
                const stepElement = document.createElement('div');
                stepElement.className = 'step';
                stepElement.dataset.step = stepNum;
                
                if (stepNum < currentStep) {
                    stepElement.classList.add('completed');
                } else if (stepNum === currentStep) {
                    stepElement.classList.add('active');
                }

                stepElement.innerHTML = `
                    <div class="step-circle">${step.icon}</div>
                    <div class="step-title">${step.title}</div>
                `;

                progressBar.appendChild(stepElement);
            });

            // Update progress bar width
            const progressWidth = ((currentStep - 1) / (totalSteps - 1)) * 100;
            if (!document.querySelector('#progress-style')) {
                const style = document.createElement('style');
                style.id = 'progress-style';
                document.head.appendChild(style);
            }
            document.querySelector('#progress-style').textContent = `.progress-bar::after { width: ${progressWidth}%; }`;
        }

        // Render current step
        function renderCurrentStep() {
            const wizardContent = document.getElementById('dynamicWizardContent');
            const currentStepData = wizardSteps[currentStep - 1];
            
            wizardContent.innerHTML = `
                <div class="wizard-content">
                    ${currentStepData.content}
                </div>
            `;

            // If it's the review step, generate review content
            if (currentStepData.id === 'review-generate') {
                generateReviewContent();
            }
        }

        // Navigation functions
        function nextStep() {
            if (currentStep < totalSteps) {
                if (validateCurrentStep()) {
                    currentStep++;
                    updateProgressBar();
                    renderCurrentStep();
                    updateNavigationButtons();
                }
            } else if (currentStep === totalSteps) {
                generateProject();
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                updateProgressBar();
                renderCurrentStep();
                updateNavigationButtons();
            }
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.style.display = currentStep > 1 ? 'block' : 'none';
            
            if (currentStep === totalSteps) {
                nextBtn.textContent = 'üöÄ Generate Project';
            } else {
                nextBtn.textContent = 'Next';
            }
        }

        // Validation
        function validateCurrentStep() {
            if (currentStep === 1) {
                const projectName = document.getElementById('projectName')?.value;
                if (!projectName?.trim()) {
                    alert('Please enter a project name.');
                    return false;
                }
            }
            return true;
        }

        // Plugin configuration functions
        function updatePluginConfig(pluginId, fieldName, value) {
            if (!pluginConfigurations[pluginId]) {
                pluginConfigurations[pluginId] = {};
            }
            pluginConfigurations[pluginId][fieldName] = value;
        }

        function updatePluginConfigArray(pluginId, fieldName, value, checked) {
            if (!pluginConfigurations[pluginId]) {
                pluginConfigurations[pluginId] = {};
            }
            if (!pluginConfigurations[pluginId][fieldName]) {
                pluginConfigurations[pluginId][fieldName] = [];
            }
            
            const array = pluginConfigurations[pluginId][fieldName];
            if (checked && !array.includes(value)) {
                array.push(value);
            } else if (!checked) {
                const index = array.indexOf(value);
                if (index > -1) {
                    array.splice(index, 1);
                }
            }
        }

        function updateRangeValue(fieldId) {
            const range = document.getElementById(fieldId);
            const valueSpan = document.getElementById(fieldId + '_value');
            if (valueSpan) {
                valueSpan.textContent = range.value;
            }
        }

        function toggleCheckbox(fieldId) {
            const checkbox = document.getElementById(fieldId);
            const container = checkbox.closest('.checkbox-item');
            checkbox.checked = !checkbox.checked;
            container.classList.toggle('checked', checkbox.checked);
            checkbox.dispatchEvent(new Event('change'));
        }

        function toggleCheckboxGroup(fieldId) {
            const checkbox = document.getElementById(fieldId);
            const container = checkbox.closest('.checkbox-item');
            checkbox.checked = !checkbox.checked;
            container.classList.toggle('checked', checkbox.checked);
            checkbox.dispatchEvent(new Event('change'));
        }

        function selectRadio(fieldId, pluginId, fieldName, value) {
            // Uncheck all radio buttons in the group
            const radioGroup = document.getElementById(fieldId).closest('.radio-group');
            radioGroup.querySelectorAll('.radio-item').forEach(item => {
                item.classList.remove('checked');
                item.querySelector('input').checked = false;
            });
            
            // Check the selected one
            const selectedItem = document.getElementById(fieldId).closest('.radio-item');
            selectedItem.classList.add('checked');
            document.getElementById(fieldId).checked = true;
            
            updatePluginConfig(pluginId, fieldName, value);
        }

        // Opens the Plugin Manager modal
        function openPluginManager() {
            // Render plugin categories and plugin list
            renderPluginManager();

            // Remove the 'hidden' class to make the modal visible
            document.getElementById('pluginModal').classList.remove('hidden');
        }

        // Closes the Plugin Manager modal
        function closePluginManager() {
            // Add the 'hidden' class to hide the modal overlay
            document.getElementById('pluginModal').classList.add('hidden');
        }

        // Render the plugin manager interface
        function renderPluginManager() {
            // Initialize category tabs and plugin list
            renderPluginCategories();
            renderPlugins('all'); // Show all plugins by default
        }

        // Render the plugin categories (with fixed event listener)
        function renderPluginCategories() {
            const categories = document.getElementById('pluginCategories');

            // Clone the node to remove old event listeners (prevents multiple bindings)
            const newCategories = categories.cloneNode(true);
            categories.parentNode.replaceChild(newCategories, categories);

            // Add a single click event listener for category switching
            newCategories.addEventListener('click', function (e) {
                if (e.target.classList.contains('category-tab')) {
                    // Remove 'active' from all category tabs
                    newCategories.querySelectorAll('.category-tab').forEach(tab =>
                        tab.classList.remove('active')
                    );

                    // Add 'active' to the clicked category
                    e.target.classList.add('active');

                    // Render plugins for the selected category
                    renderPlugins(e.target.dataset.category);
                }
            });
        }

        function renderPlugins(category) {
            const pluginsGrid = document.getElementById('pluginsGrid');
            const plugins = Object.values(pluginRegistry).filter(plugin => 
                category === 'all' || plugin.category === category
            );

            pluginsGrid.innerHTML = plugins.map(plugin => `
                <div class="plugin-card ${selectedPlugins.includes(plugin.id) ? 'selected' : ''}" 
                     data-plugin="${plugin.id}" onclick="togglePlugin('${plugin.id}')">
                    <input type="checkbox" class="plugin-checkbox" 
                           ${selectedPlugins.includes(plugin.id) ? 'checked' : ''}>
                    <div class="plugin-header">
                        <span class="plugin-icon">${plugin.icon}</span>
                        <h3>${plugin.name}</h3>
                        <span class="plugin-version">v${plugin.version}</span>
                    </div>
                    <p>${plugin.description}</p>
                    <div class="plugin-tags">
                        ${plugin.tags.map(tag => `<span class="plugin-tag">${tag}</span>`).join('')}
                    </div>
                </div>
            `).join('');
        }

        function togglePlugin(pluginId) {
            const pluginCard = document.querySelector(`[data-plugin="${pluginId}"]`);
            const checkbox = pluginCard.querySelector('.plugin-checkbox');
            
            if (selectedPlugins.includes(pluginId)) {
                selectedPlugins = selectedPlugins.filter(id => id !== pluginId);
                delete pluginConfigurations[pluginId];
                pluginCard.classList.remove('selected');
                checkbox.checked = false;
            } else {
                selectedPlugins.push(pluginId);
                pluginConfigurations[pluginId] = getDefaultConfiguration(pluginRegistry[pluginId]);
                pluginCard.classList.add('selected');
                checkbox.checked = true;
            }
        }

        function getDefaultConfiguration(plugin) {
            const config = {};
            if (plugin.configSchema) {
                plugin.configSchema.fields.forEach(field => {
                    if (field.type === 'checkbox' && Array.isArray(field.options)) {
                        config[field.name] = field.options.filter(option => option.default).map(option => option.value);
                    } else {
                        config[field.name] = field.default;
                    }
                });
            }
            return config;
        }

        function applyPluginConfiguration() {
            generateWizardSteps();
            updateProgressBar();
            renderCurrentStep();
            updateNavigationButtons();
            closePluginManager();
        }

        // Generate review content
        function generateReviewContent() {
            const projectName = document.getElementById('projectName')?.value || 'Untitled Project';
            const organization = document.getElementById('organization')?.value || 'ELCA';
            
            let reviewHTML = `
                <div class="generation-preview">
                    <h3>üìã Project Summary</h3>
                    <div class="preview-item"><strong>Project:</strong> ${projectName}</div>
                    <div class="preview-item"><strong>Organization:</strong> ${organization}</div>
                    <div class="preview-item"><strong>Selected Plugins:</strong> ${selectedPlugins.length} plugins configured</div>
                </div>

                <div class="generation-preview">
                    <h3>üîß Plugin Configurations</h3>
            `;

            selectedPlugins.forEach(pluginId => {
                const plugin = pluginRegistry[pluginId];
                const config = pluginConfigurations[pluginId] || {};
                
                reviewHTML += `
                    <div class="preview-item">
                        <strong>${plugin.icon} ${plugin.name}:</strong>
                        <ul style="margin: 5px 0 0 20px;">
                `;
                
                Object.entries(config).forEach(([key, value]) => {
                    if (Array.isArray(value)) {
                        reviewHTML += `<li>${key}: ${value.join(', ')}</li>`;
                    } else {
                        reviewHTML += `<li>${key}: ${value}</li>`;
                    }
                });
                
                reviewHTML += `</ul></div>`;
            });

            reviewHTML += `</div>`;
            
            document.getElementById('reviewContent').innerHTML = reviewHTML;
        }

        // Generate project
        function generateProject() {
            document.getElementById('reviewContent').style.display = 'none';
            document.getElementById('loadingAnimation').classList.remove('hidden');
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('prevBtn').style.display = 'none';
            
            // Simulate project generation
            setTimeout(() => {
                document.getElementById('loadingAnimation').classList.add('hidden');
                document.getElementById('successMessage').classList.remove('hidden');
            }, 3000);
        }

        // Download project (simulated)
        function downloadProject() {
            const projectName = document.getElementById('projectName')?.value || 'Generated Project';
            const pluginList = selectedPlugins.map(id => pluginRegistry[id].name).join('\\n‚Ä¢ ');
            
            alert(`üéâ Project "${projectName}" would be downloaded with:\\n\\n` +
                  `Selected Plugins:\\n‚Ä¢ ${pluginList}\\n\\n` +
                  `Generated Files:\\n` +
                  `‚Ä¢ Complete source code scaffolding\\n` +
                  `‚Ä¢ Plugin-specific configurations\\n` +
                  `‚Ä¢ Docker and deployment files\\n` +
                  `‚Ä¢ CI/CD pipeline configurations\\n` +
                  `‚Ä¢ Documentation and setup guides\\n\\n` +
                  `This is a POC demo - in production, this would generate and download the actual project.`);
        }

        // Auto-generate package name
        function setupAutoGeneratePackageName() {
            const projectNameInput = document.getElementById('projectName');
            if (projectNameInput) {
                projectNameInput.addEventListener('input', function() {
                    const projectName = this.value.toLowerCase().replace(/[^a-zA-Z0-9]/g, '');
                    const organization = document.getElementById('organization')?.value.toLowerCase() || 'elca';
                    const packageNameInput = document.getElementById('packageName');
                    if (packageNameInput) {
                        packageNameInput.value = `com.${organization}.${projectName}`;
                    }
                });
            }
        }

        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initializeApplication();
            
            // Setup auto-generation after a short delay to ensure elements exist
            setTimeout(setupAutoGeneratePackageName, 100);
        });
    </script>
</body>
</html>